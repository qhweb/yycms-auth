/*! table for Layui,Author:www.yyinfos.com 2018-06-19 */

layui.define(["laytpl","laypage","layer","form"],function(e){"use strict";var b=layui.$,x=layui.laytpl,l=layui.laypage,h=layui.layer,t=layui.form,u=layui.hint(),y=layui.device(),k={config:{checkName:"LAY_CHECKED",indexName:"LAY_TABLE_INDEX"},cache:{},index:layui.table?layui.table.index+1e4:0,set:function(e){var t=this;return t.config=b.extend({},t.config,e),t},on:function(e,t){return layui.onevent.call(this,f,e,t)}},i=function(){var t=this,e=t.config,a=e.id;return a&&(i.config[a]=e),{reload:function(e){t.reload.call(t,e)},config:e}},f="table",s="layui-hide",C="layui-none",o="layui-table-view",d=".layui-table-header",p=".layui-table-body",m=".layui-table-sort",g="layui-table-edit",a="layui-table-hover",n=function(e){return['<table cellspacing="0" cellpadding="0" border="0" class="layui-table" ','{{# if(d.data.skin){ }}lay-skin="{{d.data.skin}}"{{# } }} {{# if(d.data.size){ }}lay-size="{{d.data.size}}"{{# } }} {{# if(d.data.even){ }}lay-even{{# } }}>',"<thead>","{{# layui.each(d.data.cols, function(i1, item1){ }}","<tr>","{{# layui.each(item1, function(i2, item2){ }}",'{{# if(item2.fixed && item2.fixed !== "right"){ left = true; } }}','{{# if(item2.fixed === "right"){ right = true; } }}',(e=e||{}).fixed&&"right"!==e.fixed?'{{# if(item2.fixed && item2.fixed !== "right"){ }}':"right"===e.fixed?'{{# if(item2.fixed === "right"){ }}':"",'<th data-field="{{ item2.field||i2 }}" {{# if(item2.minWidth){ }}data-minwidth="{{item2.minWidth}}"{{# } }} {{#if(item2.colspan){}} colspan="{{item2.colspan}}"{{#} if(item2.rowspan){}} rowspan="{{item2.rowspan}}"{{#}}} {{# if(item2.unresize){ }}data-unresize="true"{{# } }}>','<div class="layui-table-cell laytable-cell-',"{{# if(item2.colspan > 1){ }}","group","{{# } else { }}","{{d.index}}-{{item2.field || i2}}",'{{# if(item2.type !== "normal"){ }}'," laytable-cell-{{ item2.type }}","{{# } }}","{{# } }}",'" {{#if(item2.align){}}align="{{item2.align}}"{{#}}}>','{{# if(item2.type === "checkbox"){ }}','<input type="checkbox" name="layTableCheckbox" lay-skin="primary" lay-filter="layTableAllChoose" {{# if(item2[d.data.checkName]){ }}checked{{# }; }}>',"{{# } else { }}",'<span>{{item2.title||""}}</span>',"{{# if(!(item2.colspan > 1) && item2.sort){ }}",'<span class="layui-table-sort layui-inline"><i class="layui-edge layui-table-sort-asc"></i><i class="layui-edge layui-table-sort-desc"></i></span>',"{{# } }}","{{# } }}","</div>","</th>",e.fixed?"{{# }; }}":"","{{# }); }}","</tr>","{{# }); }}","</thead>","</table>"].join("")},r=['<table cellspacing="0" cellpadding="0" border="0" class="layui-table" ','{{# if(d.data.skin){ }}lay-skin="{{d.data.skin}}"{{# } }} {{# if(d.data.size){ }}lay-size="{{d.data.size}}"{{# } }} {{# if(d.data.even){ }}lay-even{{# } }}>',"<tbody></tbody>","</table>"].join(""),c=['<div class="layui-form layui-border-box {{d.VIEW_CLASS}}" lay-filter="LAY-table-{{d.index}}" style="{{# if(d.data.width){ }}width:{{d.data.width}}px;{{# } }} {{# if(d.data.height){ }}height:{{d.data.height}}px;{{# } }}">',"{{# if(d.data.toolbar){ }}",'<div class="layui-table-tool"></div>',"{{# } }}",'<div class="layui-table-box">',"{{# var left, right; }}",'<div class="layui-table-header">',n(),"</div>",'<div class="layui-table-body layui-table-main">',r,"</div>","{{# if(left){ }}",'<div class="layui-table-fixed layui-table-fixed-l">','<div class="layui-table-header">',n({fixed:!0}),"</div>",'<div class="layui-table-body">',r,"</div>","</div>","{{# }; }}","{{# if(right){ }}",'<div class="layui-table-fixed layui-table-fixed-r">','<div class="layui-table-header">',n({fixed:"right"}),'<div class="layui-table-mend"></div>',"</div>",'<div class="layui-table-body">',r,"</div>","</div>","{{# }; }}","</div>","{{# if(d.data.page){ }}",'<div class="layui-table-page">','<div id="layui-table-page{{d.index}}"></div>',"</div>","{{# } }}","<style>","{{# layui.each(d.data.cols, function(i1, item1){","layui.each(item1, function(i2, item2){ }}",".laytable-cell-{{d.index}}-{{item2.field||i2}}{ ","{{# if(item2.width){ }}","width: {{item2.width}}px;","{{# } }}"," }","{{# });","}); }}","</style>","</div>"].join(""),v=b(window),w=b(document),N=function(e){var t=this;t.index=++k.index,t.config=b.extend({},t.config,k.config,e),t.render()};N.prototype.config={limit:10,loading:!0,cellMinWidth:60,text:{none:"无数据"}},N.prototype.render=function(){var e=this,t=e.config;if(t.elem=b(t.elem),t.where=t.where||{},t.id=t.id||t.elem.attr("id"),t.request=b.extend({pageName:"page",limitName:"limit"},t.request),t.response=b.extend({statusName:"code",statusCode:0,msgName:"msg",dataName:"data",countName:"count"},t.response),"object"==typeof t.page&&(t.limit=t.page.limit||t.limit,t.limits=t.page.limits||t.limits,e.page=t.page.curr=t.page.curr||1,delete t.page.elem,delete t.page.jump),!t.elem[0])return e;e.setArea();var a=t.elem,i=a.next("."+o),l=e.elem=b(x(c).render({VIEW_CLASS:o,data:t,index:e.index}));if(t.index=e.index,i[0]&&i.remove(),a.after(l),e.layHeader=l.find(d),e.layMain=l.find(".layui-table-main"),e.layBody=l.find(p),e.layFixed=l.find(".layui-table-fixed"),e.layFixLeft=l.find(".layui-table-fixed-l"),e.layFixRight=l.find(".layui-table-fixed-r"),e.layTool=l.find(".layui-table-tool"),e.layPage=l.find(".layui-table-page"),e.layTool.html(x(b(t.toolbar).html()||"").render(t)),t.height&&e.fullSize(),1<t.cols.length){var n=e.layFixed.find(d).find("th");n.height(e.layHeader.height()-1-parseFloat(n.css("padding-top"))-parseFloat(n.css("padding-bottom")))}e.pullData(e.page),e.events()},N.prototype.initOpts=function(e){this.config;e.checkbox&&(e.type="checkbox"),e.space&&(e.type="space"),e.type||(e.type="normal"),"normal"!==e.type&&(e.unresize=!0,e.width=e.width||{checkbox:48,space:15,numbers:40}[e.type])},N.prototype.setArea=function(){var i,l=this,n=l.config,e=0,o=0,d=0,r=0,c=n.width||(i=function(e){var t,a;t=(e=e||n.elem.parent()).width();try{a="none"===e.css("display")}catch(e){}return!e[0]||t&&!a?t:i(e.parent())})();l.eachCols(function(){e++}),c-="line"===n.skin||"nob"===n.skin?2:e+1,layui.each(n.cols,function(e,i){layui.each(i,function(e,t){var a;t?(l.initOpts(t),a=t.width||0,1<t.colspan||(/\d+%$/.test(a)?t.width=a=Math.floor(parseFloat(a)/100*c):a||(t.width=a=0,o++),r+=a)):i.splice(e,1)})}),l.autoColNums=o,r<c&&o&&(d=(c-r)/o),layui.each(n.cols,function(e,t){layui.each(t,function(e,t){var a=t.minWidth||n.cellMinWidth;1<t.colspan||0===t.width&&(t.width=Math.floor(a<=d?d:a))})}),n.height&&/^full-\d+$/.test(n.height)&&(l.fullHeightGap=n.height.split("-")[1],n.height=v.height()-l.fullHeightGap)},N.prototype.reload=function(e){var t=this;t.config.data&&t.config.data.constructor===Array&&delete t.config.data,t.config=b.extend({},t.config,e),t.render()},N.prototype.page=1,N.prototype.pullData=function(t,a){var i=this,l=i.config,e=l.request,n=l.response,o=function(){"object"==typeof l.initSort&&i.sort(l.initSort.field,l.initSort.type)};if(i.startTime=(new Date).getTime(),l.url){var d={};d[e.pageName]=t,d[e.limitName]=l.limit;var r=b.extend(d,l.where);l.contentType&&0==l.contentType.indexOf("application/json")&&(r=JSON.stringify(r)),b.ajax({type:l.method||"get",url:l.url,contentType:l.contentType,data:r,dataType:"json",headers:l.headers||{},success:function(e){e[n.statusName]!=n.statusCode?(i.renderForm(),i.layMain.html('<div class="'+C+'">'+(e[n.msgName]||"返回的数据状态异常")+"</div>")):(i.renderData(e,t,e[n.countName]),o(),l.time=(new Date).getTime()-i.startTime+" ms"),a&&h.close(a),"function"==typeof l.done&&l.done(e,t,e[n.countName])},error:function(e,t){i.layMain.html('<div class="'+C+'">数据接口请求异常</div>'),i.renderForm(),a&&h.close(a)}})}else if(l.data&&l.data.constructor===Array){var c={},s=t*l.limit-l.limit;c[n.dataName]=l.data.concat().splice(s,l.limit),c[n.countName]=l.data.length,i.renderData(c,t,l.data.length),o(),"function"==typeof l.done&&l.done(c,t,c[n.countName])}},N.prototype.eachCols=function(a){var l=b.extend(!0,[],this.config.cols),n=[],o=0;layui.each(l,function(t,e){layui.each(e,function(e,a){if(1<a.colspan){var i=0;o++,a.CHILD_COLS=[],layui.each(l[t+1],function(e,t){t.PARENT_COL||i==a.colspan||(t.PARENT_COL=o,a.CHILD_COLS.push(t),i+=1<t.colspan?t.colspan:1)})}a.PARENT_COL||n.push(a)})});var i=function(e){layui.each(e||n,function(e,t){if(t.CHILD_COLS)return i(t.CHILD_COLS);a(e,t)})};i()},N.prototype.renderData=function(e,d,t,r){var p=this,m=p.config,a=e[m.response.dataName]||[],c=[],g=[],v=[],i=function(){if(!r&&p.sortKey)return p.sort(p.sortKey.field,p.sortKey.sort,!0);layui.each(a,function(e,s){var h=[],u=[],y=[],f=e+m.limit*(d-1)+1;if(0!==s.length){r||(s[k.config.indexName]=e),p.eachCols(function(e,t){var a=t.field||e,i=s[a],l=s.level||0;p.getColElem(p.layHeader,a);if(null==i&&(i=""),!(1<t.colspan)){var n,o,d,r,c=['<td data-field="'+a+'" '+(r=[],t.edit&&!t.toggle&&r.push('data-edit="'+t.edit+'"'),t.align&&r.push('align="'+t.align+'"'),t.templet&&r.push('data-content="'+i+'"'),t.toolbar&&r.push('data-off="true"'),t.event&&r.push('lay-event="'+t.event+'"'),t.style&&r.push('style="'+t.style+'"'),t.minWidth&&r.push('data-minwidth="'+t.minWidth+'"'),r.join(" "))+">",(t.toggle?'<span class="lay-table-tree-bg" style="min-width:'+30*(l+1)+'px;">&nbsp;</span>':"")+'<div class="layui-table-cell laytable-cell-'+(d=m.index+"-"+a,"normal"===t.type?d:d+" laytable-cell-"+t.type)+'">'+(s.child?t.toggle?'<i class="lay-table-tree lay-table-tree-dir" lay-tabletree style="cursor: pointer;margin-left:'+30*l+'px;"></i>':"":t.toggle?'<i class="lay-table-tree lay-table-tree-file" style="margin-left:'+30*l+'px;"></i>':"")+(o=b.extend(!0,{LAY_INDEX:f},s),"checkbox"===t.type?'<input type="checkbox" name="layTableCheckbox" lay-skin="primary" '+(n=k.config.checkName,t[n]?(s[n]=t[n],t[n]?"checked":""):o[n]?"checked":"")+">":"numbers"===t.type?f:t.toolbar?x(b(t.toolbar).html()||"").render(o):t.templet?"function"==typeof t.templet?t.templet(o):x(b(t.templet).html()||String(i)).render(o):i),"</div></td>"].join("");h.push(c),t.fixed&&"right"!==t.fixed&&u.push(c),"right"===t.fixed&&y.push(c)}});var t=m.isTree,a=m.pid,i=m.id,l="";if(t){var n=s[a],o=s[i];l=0<s.level?'data-pid="'+n+'" data-id="'+o+'" class="layui-hide"':'data-id="'+o+'" class=""'}c.push('<tr data-index="'+e+'" '+l+">"+h.join("")+"</tr>"),g.push('<tr data-index="'+e+'" '+l+">"+u.join("")+"</tr>"),v.push('<tr data-index="'+e+'" '+l+">"+y.join("")+"</tr>")}}),p.layBody.scrollTop(0),p.layMain.find("."+C).remove(),p.layMain.find("tbody").html(c.join("")),p.layFixLeft.find("tbody").html(g.join("")),p.layFixRight.find("tbody").html(v.join("")),p.renderForm(),p.syncCheckAll(),p.haveInit?p.scrollPatch():setTimeout(function(){p.scrollPatch()},50),p.haveInit=!0,h.close(p.tipsIndex)};return p.key=m.id||m.index,k.cache[p.key]=a,p.layPage[0===a.length&&1==d?"addClass":"removeClass"](s),r?i():0===a.length?(p.renderForm(),p.layFixed.remove(),p.layMain.find("tbody").html(""),p.layMain.find("."+C).remove(),p.layMain.append('<div class="'+C+'">'+m.text.none+"</div>")):(i(),void(m.page&&(m.page=b.extend({elem:"layui-table-page"+m.index,count:t,limit:m.limit,limits:m.limits||[10,20,30,40,50,60,70,80,90],groups:3,layout:["prev","page","next","skip","count","limit"],prev:'<i class="layui-icon">&#xe603;</i>',next:'<i class="layui-icon">&#xe602;</i>',jump:function(e,t){t||(p.page=e.curr,m.limit=e.limit,p.pullData(e.curr,p.loading()))}},m.page),m.page.count=t,l.render(m.page))))},N.prototype.getColElem=function(e,t){var a=this.config;return e.eq(0).find(".laytable-cell-"+a.index+"-"+t+":eq(0)")},N.prototype.renderForm=function(e){t.render(e,"LAY-table-"+this.index)},N.prototype.sort=function(l,e,t,a){var i,n=this,o={},d=n.config,r=d.elem.attr("lay-filter"),c=k.cache[n.key];"string"==typeof l&&n.layHeader.find("th").each(function(e,t){var a=b(this),i=a.data("field");if(i===l)return l=a,s=i,!1});try{var s=s||l.data("field");if(n.sortKey&&!t&&s===n.sortKey.field&&e===n.sortKey.sort)return;var h=n.layHeader.find("th .laytable-cell-"+d.index+"-"+s).find(m);n.layHeader.find("th").find(m).removeAttr("lay-sort"),h.attr("lay-sort",e||null),n.layFixed.find("th")}catch(e){return u.error("Table modules: Did not match to field")}n.sortKey={field:s,sort:e},"asc"===e?i=layui.sort(c,s):"desc"===e?i=layui.sort(c,s,!0):(i=layui.sort(c,k.config.indexName),delete n.sortKey),o[d.response.dataName]=i,n.renderData(o,n.page,n.count,!0),a&&layui.event.call(l,f,"sort("+r+")",{field:s,type:e})},N.prototype.loading=function(){var e=this,t=e.config;if(t.loading&&t.url)return h.msg("数据请求中",{icon:16,offset:[e.elem.offset().top+e.elem.height()/2-35-v.scrollTop()+"px",e.elem.offset().left+e.elem.width()/2-90-v.scrollLeft()+"px"],time:-1,anim:-1,fixed:!1})},N.prototype.setCheckData=function(e,t){var a=this.config,i=k.cache[this.key];i[e]&&i[e].constructor!==Array&&(i[e][a.checkName]=t)},N.prototype.syncCheckAll=function(){var e=this,i=e.config,t=e.layHeader.find('input[name="layTableCheckbox"]'),a=function(a){return e.eachCols(function(e,t){"checkbox"===t.type&&(t[i.checkName]=a)}),a};t[0]&&(k.checkStatus(e.key).isAll?(t[0].checked||(t.prop("checked",!0),e.renderForm("checkbox")),a(!0)):(t[0].checked&&(t.prop("checked",!1),e.renderForm("checkbox")),a(!1)))},N.prototype.getCssRule=function(a,i){var l=this,e=l.elem.find("style")[0],t=e.sheet||e.styleSheet||{},n=t.cssRules||t.rules;layui.each(n,function(e,t){if(t.selectorText===".laytable-cell-"+l.index+"-"+a)return i(t),!0})},N.prototype.fullSize=function(){var e,t=this,a=t.config,i=a.height;t.fullHeightGap&&((i=v.height()-t.fullHeightGap)<135&&(i=135),t.elem.css("height",i)),e=parseFloat(i)-parseFloat(t.layHeader.height())-1,a.toolbar&&(e-=t.layTool.outerHeight()),a.page&&(e=e-t.layPage.outerHeight()-1),t.layMain.css("height",e)},N.prototype.getScrollWidth=function(e){var t=0;return e?t=e.offsetWidth-e.clientWidth:((e=document.createElement("div")).style.width="100px",e.style.height="100px",e.style.overflowY="scroll",document.body.appendChild(e),t=e.offsetWidth-e.clientWidth,document.body.removeChild(e)),t},N.prototype.scrollPatch=function(){var a=this,e=a.layMain.children("table"),t=a.layMain.width()-a.layMain.prop("clientWidth"),i=a.layMain.height()-a.layMain.prop("clientHeight"),l=a.getScrollWidth(a.layMain[0]),n=e.outerWidth()-a.layMain.width();if(a.autoColNums&&n<5&&!a.scrollPatchWStatus){var o=a.layHeader.eq(0).find("thead th:last-child"),d=o.data("field");a.getCssRule(d,function(e){var t=e.style.width||o.outerWidth();e.style.width=parseFloat(t)-l-n+"px",0<a.layMain.height()-a.layMain.prop("clientHeight")&&(e.style.width=parseFloat(e.style.width)-1+"px"),a.scrollPatchWStatus=!0})}if(t&&i){if(!a.elem.find(".layui-table-patch")[0]){var r=b('<th class="layui-table-patch"><div class="layui-table-cell"></div></th>');r.find("div").css({width:t}),a.layHeader.eq(0).find("thead tr").append(r)}}else a.layHeader.eq(0).find(".layui-table-patch").remove();var c=a.layMain.height()-i;a.layFixed.find(p).css("height",e.height()>c?c:"auto"),a.layFixRight[0<n?"removeClass":"addClass"](s),a.layFixRight.css("right",t-1)},N.prototype.events=function(){var l,o=this,n=o.config,d=b("body"),r={},e=o.layHeader.find("th"),c=".layui-table-cell",s=n.elem.attr("lay-filter");e.on("mousemove",function(e){var t=b(this),a=t.offset().left,i=e.clientX-a;1<t.attr("colspan")||t.data("unresize")||r.resizeStart||(r.allowResize=t.width()-i<=10,d.css("cursor",r.allowResize?"col-resize":""))}).on("mouseleave",function(){b(this);r.resizeStart||d.css("cursor","")}).on("mousedown",function(e){var a=b(this);if(r.allowResize){var t=a.data("field");e.preventDefault(),r.resizeStart=!0,r.offset=[e.clientX,e.clientY],o.getCssRule(t,function(e){var t=e.style.width||a.outerWidth();r.rule=e,r.ruleWidth=parseFloat(t),r.minWidth=a.data("minwidth")||n.cellMinWidth})}}),w.on("mousemove",function(e){if(r.resizeStart){if(e.preventDefault(),r.rule){var t=r.ruleWidth+e.clientX-r.offset[0];t<r.minWidth&&(t=r.minWidth),r.rule.style.width=t+"px",h.close(o.tipsIndex)}l=1}}).on("mouseup",function(e){r.resizeStart&&(r={},d.css("cursor",""),o.scrollPatch()),2===l&&(l=null)}),e.on("click",function(){var e,t=b(this),a=t.find(m),i=a.attr("lay-sort");if(!a[0]||1===l)return l=2;e="asc"===i?"desc":"desc"===i?null:"asc",o.sort(t,e,null,!0)}).find(m+" .layui-edge ").on("click",function(e){var t=b(this),a=t.index(),i=t.parents("th").eq(0).data("field");layui.stope(e),0===a?o.sort(i,"asc",null,!0):o.sort(i,"desc",null,!0)}),o.elem.on("click",'input[name="layTableCheckbox"]+',function(){var e=b(this).prev(),t=o.layBody.find('input[name="layTableCheckbox"]'),a=e.parents("tr").eq(0).data("index"),i=e[0].checked,l="layTableAllChoose"===e.attr("lay-filter");l?(t.each(function(e,t){t.checked=i,o.setCheckData(e,i)}),o.syncCheckAll(),o.renderForm("checkbox")):(o.setCheckData(a,i),o.syncCheckAll()),layui.event.call(this,f,"checkbox("+s+")",{checked:i,data:k.cache[o.key]&&k.cache[o.key][a]||{},type:l?"all":"one"})}),o.layBody.on("mouseenter","tr",function(){var e=b(this).index();o.layBody.find("tr:eq("+e+")").addClass(a)}).on("mouseleave","tr",function(){var e=b(this).index();o.layBody.find("tr:eq("+e+")").removeClass(a)}),o.layBody.on("change","."+g,function(){var e=b(this),t=this.value,a=e.parent().data("field"),i=e.parents("tr").eq(0).data("index"),l=k.cache[o.key][i];l[a]=t,layui.event.call(this,f,"edit("+s+")",{value:t,data:l,field:a})}).on("blur","."+g,function(){var a,e=b(this),i=e.parent().data("field"),t=e.parents("tr").eq(0).data("index"),l=k.cache[o.key][t];o.eachCols(function(e,t){t.field==i&&t.templet&&(a=t.templet)}),e.siblings(c).html(a?x(b(a).html()||this.value).render(l):this.value),e.parent().data("content",this.value),e.remove()}),o.layBody.on("click","*[lay-tabletree]",function(){var e=b(this),t=e.parents("td").parent("tr").data("id"),a=o.layBody.find('tr[data-pid="'+t+'"]'),i=(a.data("id"),function(e){var t=o.layBody.find('tr[data-pid="'+e+'"]'),a=t.data("id");return t.addClass("layui-hide"),t.find("i").addClass("dir").removeClass("lay-table-tree-opendir"),a?i(a):""});return a.hasClass("layui-hide")?(e.addClass("lay-table-tree-opendir"),a.removeClass("layui-hide")):(e.addClass("lay-table-tree-dir").removeClass("lay-table-tree-opendir"),i(t))}),o.layBody.on("click","td",function(){var e=b(this),t=(e.data("field"),e.data("edit")),a=e.children(c);if(h.close(o.tipsIndex),!e.data("off"))if(t)if("select"===t);else{var i=b('<input class="layui-input '+g+'">');i[0].value=e.data("content")||a.text(),e.find("."+g)[0]||e.append(i),i.focus()}else a.find(".layui-form-switch,.layui-form-checkbox")[0]||Math.round(a.prop("scrollWidth"))>Math.round(a.outerWidth())&&(o.tipsIndex=h.tips(['<div class="layui-table-tips-main" style="margin-top: -'+(a.height()+16)+"px;"+("sm"===n.size?"padding: 4px 15px; font-size: 12px;":"lg"===n.size?"padding: 14px 15px;":"")+'">',a.html(),"</div>",'<i class="layui-icon layui-table-tips-c">&#x1006;</i>'].join(""),a[0],{tips:[3,""],time:-1,anim:-1,maxWidth:y.ios||y.android?300:600,isOutAnim:!1,skin:"layui-table-tips",success:function(e,t){e.find(".layui-table-tips-c").on("click",function(){h.close(t)})}}))}),o.layBody.on("click","*[lay-event]",function(){var e=b(this),t=e.parents("tr").eq(0).data("index"),l=o.layBody.find('tr[data-index="'+t+'"]'),a="layui-table-click",n=k.cache[o.key][t];layui.event.call(this,f,"tool("+s+")",{data:k.clearCacheKey(n),event:e.attr("lay-event"),tr:l,del:function(){k.cache[o.key][t]=[],l.remove(),o.scrollPatch()},update:function(e){e=e||{},layui.each(e,function(a,e){if(a in n){var i,t=l.children('td[data-field="'+a+'"]');n[a]=e,o.eachCols(function(e,t){t.field==a&&t.templet&&(i=t.templet)}),t.children(c).html(i?x(b(i).html()||e).render(n):e),t.data("content",e)}})}}),l.addClass(a).siblings("tr").removeClass(a)}),o.layMain.on("scroll",function(){var e=b(this),t=e.scrollLeft(),a=e.scrollTop();o.layHeader.scrollLeft(t),o.layFixed.find(p).scrollTop(a),h.close(o.tipsIndex)}),v.on("resize",function(){o.fullSize(),o.scrollPatch()})},k.init=function(a,i){i=i||{};var e=b(a?'table[lay-filter="'+a+'"]':".layui-table[lay-data]"),d="Table element property lay-data configuration item has a syntax error: ";return e.each(function(){var e=b(this),t=e.attr("lay-data");try{t=new Function("return "+t)()}catch(e){u.error(d+t)}var n=[],o=b.extend({elem:this,cols:[],data:[],skin:e.attr("lay-skin"),size:e.attr("lay-size"),even:"string"==typeof e.attr("lay-even")},k.config,i,t);a&&e.hide(),e.find("thead>tr").each(function(l){o.cols[l]=[],b(this).children().each(function(e){var t=b(this),a=t.attr("lay-data");try{a=new Function("return "+a)()}catch(e){return u.error(d+a)}var i=b.extend({title:t.text(),colspan:t.attr("colspan")||0,rowspan:t.attr("rowspan")||0},a);i.colspan<2&&n.push(i),o.cols[l].push(i)})}),e.find("tbody>tr").each(function(e){var i=b(this),l={};i.children("td").each(function(e,t){var a=b(this),i=a.data("field");if(i)return l[i]=a.html()}),layui.each(n,function(e,t){var a=i.children("td").eq(e);l[t.field]=a.html()}),o.data[e]=l}),k.render(o)}),this},k.checkStatus=function(e){var a=0,i=0,l=[],t=k.cache[e]||[];return layui.each(t,function(e,t){t.constructor!==Array?t[k.config.checkName]&&(a++,l.push(k.clearCacheKey(t))):i++}),{data:l,isAll:!!t.length&&a===t.length-i}},i.config={},k.reload=function(e,t){var a=i.config[e];return t=t||{},a?(t.data&&t.data.constructor===Array&&delete a.data,k.render(b.extend(!0,{},a,t))):u.error("The ID option was not found in the table instance")},k.render=function(e){var t=new N(e);return i.call(t)},k.clearCacheKey=function(e){return delete(e=b.extend({},e))[k.config.checkName],delete e[k.config.indexName],e},k.init(),e(f,k)});